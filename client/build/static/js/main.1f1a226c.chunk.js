(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{183:function(e,t,r){},326:function(e,t,r){},332:function(e,t,r){},333:function(e,t,r){},334:function(e,t,r){},352:function(e,t,r){},359:function(e,t,r){},486:function(e,t,r){},487:function(e,t,r){},495:function(e,t){},497:function(e,t){},511:function(e,t){},513:function(e,t){},541:function(e,t){},543:function(e,t){},544:function(e,t){},549:function(e,t){},551:function(e,t){},570:function(e,t){},582:function(e,t){},585:function(e,t){},602:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(37),a=r.n(c),s=(r(326),r(38)),o=r(616),i=r(617),l=r(618),j=r(619),u=r(620),d=r(613),b=r(612),m=r.p+"static/media/blogging.ffbd0b74.png",O=r(30),h="LOGIN",p="UPDATE_USER",x="LOGIN_SUCCESS",f="LOGIN_FAILED",v="LOGOUT",g=function(e){return{type:h,payload:e}},w=function(e){return{type:x,payload:e}},y=function(e){return{type:p,payload:e}},N=function(e){return{type:f,payload:e}},S=function(){return{type:v}},k=r(1),C=d.a.SubMenu;function P(){var e=Object(O.c)((function(e){return e.user})),t=Object(O.b)();return Object(k.jsx)("div",{children:Object(k.jsxs)(d.a,{selectedKeys:"logo",mode:"horizontal",theme:"dark",children:[Object(k.jsx)(d.a.Item,{className:"unhoverable-menu-item",children:Object(k.jsxs)("a",{href:"/",children:[Object(k.jsx)(b.a,{src:m,shape:"square"})," \xa0 Blog App"]})}),e.isLoggedIn?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(C,{icon:Object(k.jsx)(b.a,{src:e.user.imagePath,shape:"circle"}),title:" "+e.user.userName,className:"float-right unhoverable-menu-item",children:[Object(k.jsx)(d.a.Item,{icon:Object(k.jsx)(o.a,{}),children:Object(k.jsx)("a",{href:"/user/profile",children:"User Profile"})},"userProfile"),Object(k.jsx)(d.a.Item,{icon:Object(k.jsx)(i.a,{}),children:Object(k.jsx)("a",{href:"/user/posts",children:"User Posts"})},"userPosts"),Object(k.jsx)(d.a.Item,{icon:Object(k.jsx)(l.a,{}),onClick:function(){return t(S())},children:"Logout"},"logout")]},"SubMenu"),Object(k.jsx)(d.a.Item,{icon:Object(k.jsx)(j.a,{}),className:"float-right",children:Object(k.jsx)("a",{href:"/posts/new",children:"New Post"})},"newPost")]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(d.a.Item,{icon:Object(k.jsx)(l.a,{}),className:"float-right",children:Object(k.jsx)("a",{href:"/login",children:"Login"})},"login"),Object(k.jsx)(d.a.Item,{icon:Object(k.jsx)(u.a,{}),className:"float-right",children:Object(k.jsx)("a",{href:"/signup",children:"Signup"})},"logout")]})]})})}var E=r(604);r(332);function I(){return Object(k.jsx)("div",{className:"footer-component",children:"\xa9 MERN Blog 2021 by Maryam Aljanabi"})}var D=E.a.Header;E.a.Footer,E.a.Sider,E.a.Content;function L(e){var t=e.children;return Object(k.jsxs)(E.a,{children:[Object(k.jsx)(D,{children:Object(k.jsx)(P,{})}),Object(k.jsxs)("div",{className:"page-container",children:[Object(k.jsx)("div",{className:"page-content",children:t}),Object(k.jsx)("div",{className:"footer",children:Object(k.jsx)(I,{})})]})]})}var B=r(14),T=r.n(B),z=r(28),_=r(10);r(333);function F(e){var t=e.children;return Object(k.jsx)("div",{className:"jumbotron",children:t})}r(334);var U=r(82),R=r(607),A=r(91),M=r(605),V=r(614),W=r(606),Y=r(623),G=r(311),q=r.n(G),J={baseURL:"https://".concat(window.location.hostname,":5000/api")},H=q.a.create(J),K=function(e){return H.post("/auth/login",e)},Q=function(e){return H.post("/auth/signup",e)},X=function(e){return H.get("/users/".concat(e))},Z=function(e){return H.put("/users",e)},$=function(){return H.get("/posts")},ee=function(e){return H.get("/posts/user/".concat(e))},te=function(e){return H.get("/posts/".concat(e))},re=function(e){return H.post("/posts",e)},ne=function(e){return H.put("/posts",e)},ce=function(e){return H.delete("/posts/".concat(e))},ae=function(e){return H.post("/comments",e)},se=function(e){return H.put("/comments",e)},oe=function(e){return H.delete("/comments/".concat(e))},ie=r.p+"static/media/default-post-image.dd982f18.jpg",le=r(320),je=r(120),ue=r(68),de=r(611),be=r(621),me=r(622),Oe=(r(352),R.a.Meta);function he(e){var t=e.data,r=e.reloadPosts,c=Object(s.g)(),a=Object(n.useState)(!1),o=Object(_.a)(a,2),i=o[0],l=o[1],j=Object(n.useState)(null),u=Object(_.a)(j,2),d=u[0],b=u[1],m=Object(n.useState)(!1),h=Object(_.a)(m,2),p=h[0],x=h[1],f=Object(O.c)((function(e){return e.user})),v=function(){var e=Object(z.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce(d);case 3:x(!p),r(!p),l(!1),le.b.success("Post deleted successfully"),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error deleting post...",null!==(t=e.t0.response)&&void 0!==t?t:e.t0),le.b.error("Error deleting post"),e.t0.response&&e.t0.response.data?le.b.error(e.t0.response.data):le.b.error("Error deleting post"),l(!1);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsx)(je.a,{className:"posts-container",type:"flex",children:t.map((function(e){return Object(k.jsx)(ue.a,{xs:24,sm:12,md:8,lg:8,children:Object(k.jsx)(R.a,{hoverable:!0,cover:Object(k.jsx)("div",{className:"image-container",onClick:function(){return c.push("/posts/view",{postID:e._id})},children:Object(k.jsx)("img",{alt:e.title,src:e.imagePath?e.imagePath:ie,className:"card-image"})}),actions:e.createdBy===f.user.id?[Object(k.jsx)(be.a,{onClick:function(){return c.push("/posts/edit",{postID:e._id})}},"edit"),Object(k.jsx)(me.a,{twoToneColor:"red",onClick:function(){b(e._id),l(!0)}},"delete")]:[],children:Object(k.jsx)(Oe,{title:e.title,description:e.content.substring(0,100)+"...",onClick:function(){return c.push("/posts/view",{postID:e._id})}})})},e._id)}))}),Object(k.jsx)(de.a,{title:"Delete Confirmation",visible:i,onOk:function(){return v()},onCancel:function(){return l(!1)},centered:!0,children:Object(k.jsx)("p",{children:"Are you sure you want to delete post?"})})]})}R.a.Meta;function pe(){var e=Object(s.g)(),t=Object(O.c)((function(e){return e.user})),r=Object(n.useState)([]),c=Object(_.a)(r,2),a=c[0],o=c[1],i=Object(n.useState)(window.innerWidth),l=Object(_.a)(i,2),j=l[0],u=l[1],d=Object(n.useState)(null),b=Object(_.a)(d,2),m=b[0],h=b[1],p=Object(n.useState)(!1),x=Object(_.a)(p,2),f=x[0],v=x[1];return Object(n.useEffect)((function(){function e(){u(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[j]),Object(n.useEffect)((function(){Object(z.a)(T.a.mark((function e(){var t,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$();case 3:t=e.sent,r=t.data,o(r),h(null),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),h("Error loading posts data"),console.log("Error retrieving all posts...",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[f]),Object(k.jsxs)("div",{className:"home",children:[t.isLoggedIn?Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(F,{children:Object(k.jsx)("div",{className:"home-jumbotron",children:j<=650?Object(k.jsxs)("div",{className:"centered-section",children:[Object(k.jsx)("h3",{children:"A blogging website for"}),Object(k.jsx)("h2",{children:"EVERYONE"}),Object(k.jsx)(A.a,{type:"primary",shape:"round",icon:Object(k.jsx)(Y.a,{}),size:"large",onClick:function(){return e.push("/posts/new")},children:"Write a post now!"})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"left-section",children:[Object(k.jsx)("h3",{children:"A blogging website for"}),Object(k.jsx)("h2",{children:"EVERYONE"}),Object(k.jsx)(A.a,{type:"primary",shape:"round",icon:Object(k.jsx)(Y.a,{}),size:"large",onClick:function(){return e.push("/posts/new")},children:"Get Started"})]}),Object(k.jsx)("div",{className:"right-section",children:Object(k.jsx)(U.a,{autoplay:!0,loop:!0,src:"https://assets10.lottiefiles.com/packages/lf20_GtqlRg.json"})})]})})})}):Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(F,{children:Object(k.jsx)("div",{className:"home-jumbotron",children:j<=650?Object(k.jsxs)("div",{className:"centered-section",children:[Object(k.jsx)("h3",{children:"A blogging website for"}),Object(k.jsx)("h2",{children:"EVERYONE"}),Object(k.jsx)(A.a,{type:"primary",shape:"round",icon:Object(k.jsx)(Y.a,{}),size:"large",onClick:function(){return e.push("/login")},children:"Get Started"})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"left-section",children:[Object(k.jsx)("h3",{children:"A blogging website for"}),Object(k.jsx)("h2",{children:"EVERYONE"}),Object(k.jsx)(A.a,{type:"primary",shape:"round",icon:Object(k.jsx)(Y.a,{}),size:"large",onClick:function(){return e.push("/login")},children:"Get Started"})]}),Object(k.jsx)("div",{className:"right-section",children:Object(k.jsx)(U.a,{autoplay:!0,loop:!0,src:"https://assets10.lottiefiles.com/packages/lf20_GtqlRg.json"})})]})})})}),Object(k.jsx)(M.a,{orientation:"center",children:"Most recent posts"}),m?Object(k.jsx)("div",{className:"loader-container",children:Object(k.jsx)(V.a,{message:m,type:"error"})}):a&&Boolean(a.length)?Object(k.jsx)(he,{data:a,reloadPosts:function(e){return v(e)}}):Object(k.jsx)("div",{className:"loader-container",children:Object(k.jsx)(W.a,{size:"large"})})]})}r(359);var xe=r(8),fe=r(608),ve=r(610),ge=r(615),we=r(21),ye=r(52),Ne=r.n(ye);function Se(){var e=Object(s.g)(),t=Object(n.useState)({}),r=Object(_.a)(t,2),c=r[0],a=(r[1],Object(n.useState)({})),o=Object(_.a)(a,2),i=o[0],l=o[1],j=Object(O.b)(),u=Object(O.c)((function(e){return e.user})),d=function(){var e=Object(z.a)(T.a.mark((function e(t){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{j(g({user:t}))}catch(n){console.log("Error logging in user...",null!==(r=n.response)&&void 0!==r?r:n),n.response&&n.response.data?l(n.response.data):l({err:"Login error"})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u.error&&l([u.error]),u.isLoggedIn&&(le.b.success("User logged in successfully"),e.push("/"))}),[u]),Object(k.jsx)(we.b,{initialValues:c,validate:function(e){var t,r,n={};return(null===(t=e.email)||void 0===t?void 0:t.trim())||(n.email="Please enter the email"),(null===(r=e.password)||void 0===r?void 0:r.trim())||(n.password="Please enter the password"),n},onSubmit:d,render:function(t){var r=t.handleSubmit,n=t.submitting;return Object(k.jsxs)("form",{className:"form",onSubmit:r,children:[Object(k.jsx)(fe.a.Item,{label:"Email",labelCol:{span:24},wrapperCol:{span:24},children:Object(k.jsx)(we.a,{name:"email",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"email"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Password",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"password",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a.Password,Object(xe.a)(Object(xe.a)({},t),{},{name:"password"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),!Ne()(i)&&Object(k.jsx)("div",{children:"object"===typeof i?Object.entries(i).map((function(e){var t=Object(_.a)(e,2),r=t[0],n=t[1];return Object(k.jsx)(ge.a,{color:"error",className:"full-width",children:n},r)})):Object(k.jsx)(ge.a,{color:"error",className:"full-width",children:i})}),Object(k.jsxs)("div",{className:"buttons-wrapper-vertical",children:[Object(k.jsx)(A.a,{disabled:n,htmlType:"submit",type:"primary",children:"Login"}),Object(k.jsx)(A.a,{htmlType:"button",type:"link",onClick:function(){return e.push("signup")},children:"Don't have an account? Signup!"})]})]})}})}function ke(){var e=Object(n.useState)(window.innerWidth),t=Object(_.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){c(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[r]),Object(k.jsx)("div",{className:"login",children:r<=650?Object(k.jsx)("div",{className:"center-panel",children:Object(k.jsx)(Se,{})}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"left-panel",children:Object(k.jsx)(Se,{})}),Object(k.jsxs)("div",{className:"right-panel",children:[Object(k.jsx)("h2",{children:"#1 Bloggin website for everyone around the globe. Totally free and easy to use."}),Object(k.jsx)(U.a,{autoplay:!0,loop:!0,src:"https://assets2.lottiefiles.com/packages/lf20_jcikwtux.json"})]})]})})}function Ce(){var e=Object(s.g)(),t=Object(n.useState)({}),r=Object(_.a)(t,2),c=r[0],a=(r[1],Object(n.useState)({})),o=Object(_.a)(a,2),i=o[0],l=o[1],j=function(){var t=Object(z.a)(T.a.mark((function t(r){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q({user:r});case 3:le.b.success("User created successfully"),e.push("/login"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error registering a new user...",null!==(n=t.t0.response)&&void 0!==n?n:t.t0),t.t0.response&&t.t0.response.data?l(t.t0.response.data):l({err:"Signup error"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsx)(we.b,{initialValues:c,validate:function(e){var t,r,n,c,a={};return(null===(t=e.userName)||void 0===t?void 0:t.trim())||(a.userName="Please enter the userName"),(null===(r=e.password)||void 0===r?void 0:r.trim())||(a.password="Please enter the password"),(null===(n=e.confirmPassword)||void 0===n?void 0:n.trim())?e.confirmPassword!==e.password&&(a.confirmPassword="Passwords do not match"):a.confirmPassword="Please enter the password confirmation",(null===(c=e.email)||void 0===c?void 0:c.trim())||(a.email="Please enter the email"),a},onSubmit:j,render:function(t){var r=t.handleSubmit,n=t.submitting;return Object(k.jsxs)("form",{className:"form",onSubmit:r,children:[Object(k.jsx)(fe.a.Item,{label:"UserName",labelCol:{span:24},wrapperCol:{span:24},children:Object(k.jsx)(we.a,{name:"userName",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"userName"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Password",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"password",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a.Password,Object(xe.a)(Object(xe.a)({},t),{},{name:"password"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Confirm Password",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"confirmPassword",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a.Password,Object(xe.a)(Object(xe.a)({},t),{},{name:"confirmPassword"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Email",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"email",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"email"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Summary",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"summary",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"summary"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Image URL",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"imagePath",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"imagePath"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),!Ne()(i)&&Object(k.jsx)("div",{children:Object.entries(i).map((function(e){var t=Object(_.a)(e,2),r=t[0],n=t[1];return Object(k.jsx)(ge.a,{color:"error",className:"full-width",children:n},r)}))}),Object(k.jsxs)("div",{className:"buttons-wrapper-vertical",children:[Object(k.jsx)(A.a,{disabled:n,htmlType:"submit",type:"primary",children:"Signup"}),Object(k.jsx)(A.a,{htmlType:"button",type:"link",onClick:function(){return e.push("login")},children:"Already have an account? Login!"})]})]})}})}function Pe(){var e=Object(n.useState)(window.innerWidth),t=Object(_.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){c(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[r]),Object(k.jsx)("div",{className:"signup",children:r<=650?Object(k.jsxs)("div",{className:"center-panel",children:[Object(k.jsx)("h2",{className:"centered-text",children:"Sign up for free"}),Object(k.jsx)(Ce,{})]}):Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{className:"center-panel-small",children:[Object(k.jsx)("h2",{className:"centered-text",children:"Sign up for free"}),Object(k.jsx)(Ce,{})]})})})}var Ee=r(168),Ie=r.n(Ee);function De(){var e=Object(s.g)(),t=Object(n.useState)({}),r=Object(_.a)(t,2),c=r[0],a=(r[1],Object(n.useState)({})),o=Object(_.a)(a,2),i=o[0],l=o[1],j=Object(O.c)((function(e){return e.user})),u=function(){var t=Object(z.a)(T.a.mark((function t(r){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re({post:Object(xe.a)(Object(xe.a)({},r),{},{createdBy:j.user.id})});case 3:le.b.success("Post created successfully"),e.push("/"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error creating a new post...",null!==(n=t.t0.response)&&void 0!==n?n:t.t0),t.t0.response&&t.t0.response.data?l(t.t0.response.data):l({err:"Post error"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"form-container",children:[Object(k.jsx)("h3",{children:"Create a new post"}),Object(k.jsx)(we.b,{initialValues:c,validate:function(e){var t,r,n={};return(null===(t=e.title)||void 0===t?void 0:t.trim())||(n.title="Please enter the post's title"),(null===(r=e.content)||void 0===r?void 0:r.trim())||(n.content="Please enter the post's content"),n},onSubmit:u,render:function(t){var r=t.handleSubmit,n=t.submitting;return Object(k.jsxs)("form",{className:"form",onSubmit:r,children:[Object(k.jsx)(fe.a.Item,{label:"Title",labelCol:{span:24},wrapperCol:{span:24},children:Object(k.jsx)(we.a,{name:"title",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"title"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Content",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"content",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(Ie.a,Object(xe.a)(Object(xe.a)({rows:4},t),{},{name:"content"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Image URL",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"imagePath",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"imagePath"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),!Ne()(i)&&Object(k.jsx)("div",{children:Object.entries(i).map((function(e){var t=Object(_.a)(e,2),r=t[0],n=t[1];return Object(k.jsx)(ge.a,{color:"error",className:"full-width",children:n},r)}))}),Object(k.jsxs)("div",{className:"buttons-wrapper-horizontal",children:[Object(k.jsx)(A.a,{disabled:n,htmlType:"submit",type:"primary",children:"Create Post"}),Object(k.jsx)(A.a,{htmlType:"button",onClick:function(){return e.goBack()},children:"Back"})]})]})}})]})}function Le(){var e=Object(O.c)((function(e){return e.user})),t=Object(n.useState)(window.innerWidth),r=Object(_.a)(t,2),c=r[0],a=r[1],o=Object(n.useState)([]),i=Object(_.a)(o,2),l=i[0],j=i[1],u=Object(s.h)(),d=Object(n.useState)(null),b=Object(_.a)(d,2),m=b[0],h=b[1],p=Object(n.useState)(null),x=Object(_.a)(p,2),f=x[0],v=x[1],g=Object(n.useState)(!1),w=Object(_.a)(g,2),y=w[0],N=w[1],S=Object(n.useState)(null),C=Object(_.a)(S,2),P=C[0],E=C[1];Object(n.useEffect)((function(){function e(){a(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[c]);var I=function(){var t=Object(z.a)(T.a.mark((function t(){var r,n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ee(null!==f&&void 0!==f?f:e.user.id);case 3:r=t.sent,n=r.data,j(n),E(null),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),j([]),E("Error loading user posts"),console.log("Error retrieving all posts...",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){Object(z.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.state&&u.state.hasOwnProperty("userID")&&u.state.hasOwnProperty("userName")&&(h(u.state.userName),v(u.state.userID)),I();case 2:case"end":return e.stop()}}),e)})))()}),[u.state]),Object(n.useEffect)((function(){I()}),[y]),Object(k.jsx)("div",{className:"posts-div",children:P?Object(k.jsx)("div",{className:"loader-container",children:Object(k.jsx)(V.a,{message:P,type:"error"})}):0===Object.keys(l).length?Object(k.jsx)("div",{className:"loader-container",children:Object(k.jsx)(W.a,{size:"large"})}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("h2",{children:m?"Posts of user ".concat(m):"Your posts"}),Boolean(l)&&Boolean(l.length)?Object(k.jsx)(he,{data:l,reloadPosts:function(e){return N(e)}}):Object(k.jsx)("h2",{children:"You have no posts yet"})]})})}function Be(){var e=Object(s.g)(),t=Object(n.useState)({}),r=Object(_.a)(t,2),c=r[0],a=r[1],o=Object(n.useState)({}),i=Object(_.a)(o,2),l=i[0],j=i[1],u=(Object(O.c)((function(e){return e.user})),Object(s.h)()),d=Object(n.useState)(null),b=Object(_.a)(d,2),m=(b[0],b[1]);Object(n.useEffect)((function(){var t=null;Object(z.a)(T.a.mark((function r(){var n,c;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!u.state||!u.state.hasOwnProperty("postID")){r.next=17;break}return t=u.state.postID,m(t),r.prev=3,r.next=6,te(t);case 6:n=r.sent,c=n.data,console.log(c),a(c),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(3),console.log("Error retrieving one post...",r.t0);case 15:r.next=19;break;case 17:le.b.error("Post ID was not provided"),e.goBack();case 19:case"end":return r.stop()}}),r,null,[[3,12]])})))()}),[u.state]);var h=function(){var t=Object(z.a)(T.a.mark((function t(r){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne({post:r});case 3:le.b.success("Post updated successfully"),e.goBack(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error updating post...",null!==(n=t.t0.response)&&void 0!==n?n:t.t0),t.t0.response&&t.t0.response.data?j(t.t0.response.data):j({err:"Update error"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"form-container",children:[Object(k.jsx)("h3",{children:"Edit post"}),Object(k.jsx)(we.b,{initialValues:c,validate:function(e){var t,r,n={};return(null===(t=e.title)||void 0===t?void 0:t.trim())||(n.title="Please enter the post's title"),(null===(r=e.content)||void 0===r?void 0:r.trim())||(n.content="Please enter the post's content"),n},onSubmit:h,render:function(t){var r=t.handleSubmit,n=t.submitting;return Object(k.jsxs)("form",{className:"form",onSubmit:r,children:[Object(k.jsx)(fe.a.Item,{label:"Title",labelCol:{span:24},wrapperCol:{span:24},children:Object(k.jsx)(we.a,{name:"title",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"title"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Content",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"content",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(Ie.a,Object(xe.a)(Object(xe.a)({rows:4},t),{},{name:"content"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Image URL",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"imagePath",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"imagePath"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),!Ne()(l)&&Object(k.jsx)("div",{children:Object.entries(l).map((function(e){var t=Object(_.a)(e,2),r=t[0],n=t[1];return Object(k.jsx)(ge.a,{color:"error",className:"full-width",children:n},r)}))}),Object(k.jsxs)("div",{className:"buttons-wrapper-horizontal",children:[Object(k.jsx)(A.a,{disabled:n,htmlType:"submit",type:"primary",children:"Update Post"}),Object(k.jsx)(A.a,{htmlType:"button",onClick:function(){return e.goBack()},children:"Back"})]})]})}})]})}var Te=r(609),ze=r(624),_e=r(625),Fe=r(626),Ue=r(627),Re=r.p+"static/media/default-user.c3f94521.png";r(486);function Ae(){var e,t=Object(s.g)(),r=Object(n.useState)({}),c=Object(_.a)(r,2),a=c[0],o=c[1],i=Object(n.useState)({}),l=Object(_.a)(i,2),j=l[0],u=l[1],d=Object(O.c)((function(e){return e.user})),b=Object(n.useState)(!1),m=Object(_.a)(b,2),h=m[0],p=m[1],x=Object(n.useState)(!1),f=Object(_.a)(x,2),v=f[0],g=f[1],w=Object(O.b)(),N=Object(n.useState)(null),S=Object(_.a)(N,2),C=S[0],P=S[1];Object(n.useEffect)((function(){Object(z.a)(T.a.mark((function e(){var r,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d&&d.user&&d.user.id)){e.next=17;break}return e.prev=1,e.next=4,X(d.user.id);case 4:r=e.sent,n=r.data,o(n),P(null),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),o({}),P("Error loading user profile"),console.log("Error retrieving user data...",e.t0);case 15:e.next=19;break;case 17:le.b.error("An error occured while retrieving user ID"),t.push("/");case 19:case"end":return e.stop()}}),e,null,[[1,10]])})))()}),[]);var E=function(){var e=Object(z.a)(T.a.mark((function e(t){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u([]),e.prev=1,e.next=4,Z({user:t});case 4:w(y(t)),le.b.success("User profile updated successfully"),p(!1),g(!1),o(t),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Error updating user profile..",null!==(r=e.t0.response)&&void 0!==r?r:e.t0),e.t0.response&&e.t0.response.data?u(e.t0.response.data):u({err:"Profile update error"});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{children:Object(k.jsx)("div",{className:"user-profile",children:C?Object(k.jsx)("div",{className:"loader-container",children:Object(k.jsx)(V.a,{message:C,type:"error"})}):0===Object.keys(a).length?Object(k.jsx)("div",{className:"loader-container",children:Object(k.jsx)(W.a,{size:"large"})}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("h2",{className:"centered-text ",children:[a.userName,"'s Profile"]}),Object(k.jsx)("div",{className:"user-image centered-text ",children:Object(k.jsx)(Te.a,{className:"image",src:null!==(e=a.imagePath)&&void 0!==e?e:Re})}),Object(k.jsx)("div",{className:"user-info",children:Object(k.jsx)(we.b,{initialValues:a,validate:function(e){var t,r,n,c,a,s={};return h&&!(null===(t=e.userName)||void 0===t?void 0:t.trim())&&(s.userName="Please enter the userName"),v&&!(null===(r=e.oldPassword)||void 0===r?void 0:r.trim())&&(s.password="Please enter the old password"),v&&!(null===(n=e.password)||void 0===n?void 0:n.trim())&&(s.password="Please enter the password"),v&&!(null===(c=e.confirmPassword)||void 0===c?void 0:c.trim())?s.confirmPassword="Please enter the password confirmation":v&&e.confirmPassword!==e.password&&(s.confirmPassword="Passwords do not match"),h&&!(null===(a=e.email)||void 0===a?void 0:a.trim())&&(s.email="Please enter the email"),s},onSubmit:E,render:function(e){var t=e.handleSubmit,r=e.submitting,n=e.form;return Object(k.jsxs)("form",{className:"form",onSubmit:t,children:[Object(k.jsx)(fe.a.Item,{label:"UserName",labelCol:{span:24},wrapperCol:{span:24},children:Object(k.jsx)(we.a,{name:"userName",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"userName",readOnly:!h,className:!h&&"disabled"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Email",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"email",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"email",readOnly:!h,className:!h&&"disabled"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Summary",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"summary",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{value:a.summary||h?a.summary:"No content",name:"summary",readOnly:!h,className:!h&&"disabled"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),h&&Object(k.jsx)(fe.a.Item,{label:"Image URL",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"imagePath",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"imagePath"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),v&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(fe.a.Item,{label:"Old Password",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"oldPassword",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a.Password,Object(xe.a)(Object(xe.a)({},t),{},{name:"oldPassword",className:"no-radius"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Password",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"password",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a.Password,Object(xe.a)(Object(xe.a)({},t),{},{name:"password"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})}),Object(k.jsx)(fe.a.Item,{label:"Confirm Password",labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"confirmPassword",children:function(e){var t=e.input,r=e.meta;return Object(k.jsxs)("div",{children:[Object(k.jsx)(ve.a.Password,Object(xe.a)(Object(xe.a)({},t),{},{name:"confirmPassword"})),r.touched&&r.error&&Object(k.jsx)(ge.a,{color:"error",children:r.error})]})}})})]}),!Ne()(j)&&Object(k.jsx)("div",{children:Object.entries(j).map((function(e){var t=Object(_.a)(e,2),r=t[0],n=t[1];return Object(k.jsx)(ge.a,{color:"error",className:"full-width",children:n},r)}))}),Object(k.jsxs)("div",{className:"buttons-wrapper-horizontal m-auto",children:[!(h||v)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(A.a,{htmlType:"button",type:"primary",icon:Object(k.jsx)(ze.a,{}),onClick:function(){p(!0),g(!1)},children:"Edit Profile"}),Object(k.jsx)(A.a,{htmlType:"button",type:"primary",icon:Object(k.jsx)(_e.a,{}),onClick:function(){p(!1),g(!0)},children:"Edit Password"})]}),(h||v)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(A.a,{disabled:r,htmlType:"submit",type:"primary",icon:Object(k.jsx)(Fe.a,{}),children:"Submit"}),Object(k.jsx)(A.a,{htmlType:"button",type:"primary",icon:Object(k.jsx)(Ue.a,{}),onClick:function(){p(!1),g(!1),n.reset()},children:"Cancel"})]})]})]})}})})]})})})}var Me=r(628),Ve=(r(487),r(89)),We=r.n(Ve),Ye=r(90),Ge=r.n(Ye);function qe(e){var t=e.createdBy,r=e.postId,c=e.setReloadingFlag,a=(Object(s.g)(),Object(n.useState)({})),o=Object(_.a)(a,2),i=o[0],l=(o[1],Object(n.useState)(null)),j=Object(_.a)(l,2),u=j[0],d=j[1],b=Object(n.useState)(!1),m=Object(_.a)(b,2),O=m[0],h=m[1],p=function(){var e=Object(z.a)(T.a.mark((function e(n){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne()(n)||!n.content?d("Can't submit an empty comment"):d(null),e.prev=1,e.next=4,ae({comment:Object(xe.a)(Object(xe.a)({},n),{},{createdBy:t,postId:r})});case 4:le.b.success("Comment added successfully"),h(!O),c(O),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error adding comment...",null!==(a=e.t0.response)&&void 0!==a?a:e.t0),e.t0.response&&e.t0.response.data?d(e.t0.response.data):d("Error adding comment");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"comment-form",children:Object(k.jsx)(we.b,{initialValues:i,onSubmit:p,render:function(e){var t=e.form,r=e.handleSubmit,n=e.submitting;e.reset;return Object(k.jsxs)("form",{onSubmit:function(){var e=Object(z.a)(T.a.mark((function e(n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n);case 2:t.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(k.jsx)(fe.a.Item,{labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"content",children:function(e){var t=e.input;e.meta;return Object(k.jsx)("div",{children:Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"content",placeholder:"Add a comment"}))})}})}),u&&Object(k.jsx)(V.a,{message:u,type:"error",showIcon:!0,closable:!0}),Object(k.jsxs)("div",{className:"comments-btns-container",children:[Object(k.jsx)(A.a,{disabled:n,htmlType:"button",onClick:t.reset,children:"Clear"}),Object(k.jsx)(A.a,{disabled:n,htmlType:"submit",type:"primary",children:"Comment"})]})]})}})})}r(183);function Je(e){var t,r=e.comment,c=e.index,a=e.userState,s=e.setDeleteModal,o=e.selectedEditCommentID,i=e.setDeleteSelectedCommentID,l=e.setEditSelectedCommentID,j=e.onSubmit,u=Object(n.useState)({}),d=Object(_.a)(u,2),b=d[0],m=d[1],O=Object(n.useState)(null),h=Object(_.a)(O,2),p=h[0];h[1];return Object(k.jsxs)("div",{className:"comment-container full-width-comment",children:[Object(k.jsx)("div",{children:Object(k.jsx)(Ge.a,{size:"large",src:null!==(t=r.createdBy.imagePath)&&void 0!==t?t:Re})}),Object(k.jsxs)("div",{className:r._id===o?"full-width-comment":"cols",children:[Object(k.jsxs)("div",{className:"comment-text",children:[Object(k.jsx)("b",{children:r.createdBy.userName}),Object(k.jsx)("div",{children:r._id===o?Object(k.jsx)(we.b,{initialValues:b,onSubmit:j,render:function(e){var t=e.form,r=e.handleSubmit,n=e.submitting;e.reset;return Object(k.jsxs)("form",{className:"comment-editing",onSubmit:function(){var e=Object(z.a)(T.a.mark((function e(n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n);case 2:t.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(k.jsx)(fe.a.Item,{labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"content",children:function(e){var t=e.input;e.meta;return Object(k.jsx)("div",{children:Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"content"}))})}})}),p&&Object(k.jsx)(V.a,{message:p,type:"error",showIcon:!0,closable:!0}),Object(k.jsxs)("div",{className:"comments-btns-container",children:[Object(k.jsx)(A.a,{disabled:n,htmlType:"submit",type:"primary",children:"Update Comment"}),Object(k.jsx)(A.a,{disabled:n,htmlType:"button",onClick:function(){return l(null)},children:"Cancel"})]})]})}}):r.content})]}),Object(k.jsx)("div",{className:"comment-date",children:r._id!==o&&Object(k.jsxs)(k.Fragment,{children:[We()(r.createdAt).fromNow(!1),r.createdBy._id===a.user.id&&Object(k.jsxs)("div",{className:"icons-cols",children:[Object(k.jsx)(be.a,{onClick:function(){l(r._id),m(Object(xe.a)({},r))}},"edit"),Object(k.jsx)(me.a,{twoToneColor:"red",onClick:function(){i(r._id),s(!0)}},"delete")]})]})})]})]},c)}function He(e){var t,r=e.comment,c=e.index,a=e.userState,s=e.setDeleteModal,o=e.selectedEditCommentID,i=e.setDeleteSelectedCommentID,l=e.setEditSelectedCommentID,j=e.onSubmit,u=Object(n.useState)({}),d=Object(_.a)(u,2),b=d[0],m=d[1],O=Object(n.useState)(null),h=Object(_.a)(O,2),p=h[0];h[1];return Object(k.jsxs)("div",{className:"comment-container full-width-comment",children:[Object(k.jsx)("div",{children:Object(k.jsx)(Ge.a,{size:"large",src:null!==(t=r.createdBy.imagePath)&&void 0!==t?t:Re})}),Object(k.jsxs)("div",{className:"full-width-comment",children:[Object(k.jsxs)("div",{className:"comment-text-mobile",children:[Object(k.jsx)("b",{children:r.createdBy.userName}),Object(k.jsx)("div",{className:"comment-date-mobile",children:We()(r.createdAt).fromNow(!1)}),Object(k.jsx)("div",{children:r._id===o?Object(k.jsx)(we.b,{initialValues:b,onSubmit:j,render:function(e){var t=e.form,r=e.handleSubmit,n=e.submitting;e.reset;return Object(k.jsxs)("form",{className:"comment-editing",onSubmit:function(){var e=Object(z.a)(T.a.mark((function e(n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n);case 2:t.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(k.jsx)(fe.a.Item,{labelCol:{span:24},children:Object(k.jsx)(we.a,{name:"content",children:function(e){var t=e.input;e.meta;return Object(k.jsx)("div",{children:Object(k.jsx)(ve.a,Object(xe.a)(Object(xe.a)({},t),{},{name:"content"}))})}})}),p&&Object(k.jsx)(V.a,{message:p,type:"error",showIcon:!0,closable:!0}),Object(k.jsxs)("div",{className:"comments-btns-container",children:[Object(k.jsx)(A.a,{disabled:n,htmlType:"submit",type:"primary",children:"Update Comment"}),Object(k.jsx)(A.a,{disabled:n,htmlType:"button",onClick:function(){return l(null)},children:"Cancel"})]})]})}}):r.content})]}),r._id!==o&&Object(k.jsx)(k.Fragment,{children:r.createdBy._id===a.user.id&&Object(k.jsxs)("div",{className:"icons-cols-mobile",children:[Object(k.jsx)(be.a,{onClick:function(){l(r._id),m(Object(xe.a)({},r))}},"edit"),Object(k.jsx)(me.a,{twoToneColor:"red",onClick:function(){i(r._id),s(!0)}},"delete")]})})]})]},c)}function Ke(e){var t=e.data,r=e.setDeleteReloadingFlag,c=e.setEditReloadingFlag,a=Object(O.c)((function(e){return e.user})),s=Object(n.useState)(!1),o=Object(_.a)(s,2),i=o[0],l=o[1],j=Object(n.useState)(null),u=Object(_.a)(j,2),d=u[0],b=u[1],m=Object(n.useState)(null),h=Object(_.a)(m,2),p=h[0],x=h[1],f=Object(n.useState)(!1),v=Object(_.a)(f,2),g=v[0],w=v[1],y=Object(n.useState)(!1),N=Object(_.a)(y,2),S=N[0],C=N[1],P=Object(n.useState)({}),E=Object(_.a)(P,2),I=(E[0],E[1],Object(n.useState)(null)),D=Object(_.a)(I,2),L=(D[0],D[1]),B=Object(n.useState)(window.innerWidth),F=Object(_.a)(B,2),U=F[0],R=F[1];Object(n.useEffect)((function(){function e(){R(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[U]);var A=function(){var e=Object(z.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe(d);case 3:l(!1),le.b.success("Comment deleted successfully"),r(!g),w(!g),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error deleting comment...",null!==(t=e.t0.response)&&void 0!==t?t:e.t0),le.b.error("Error deleting comment"),e.t0.response&&e.t0.response.data?le.b.error(e.t0.response.data):le.b.error("Error deleting comment"),l(!1);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(z.a)(T.a.mark((function e(t){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne()(t)||!t.content?L("Can't submit an empty comment"):L(null),e.prev=1,e.next=4,se({comment:Object(xe.a)({},t)});case 4:le.b.success("Comment updated successfully"),c(!S),C(!S),x(null),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error editing comment...",null!==(r=e.t0.response)&&void 0!==r?r:e.t0),le.b.error("Error editing comment");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[t&&Boolean(t.length)?1===t.length?"".concat(t.length," Comment"):"".concat(t.length," Comments"):null,t.map((function(e,t){return U>=580?Object(k.jsx)(Je,{comment:e,index:t,userState:a,setEditSelectedCommentID:x,selectedEditCommentID:p,setDeleteSelectedCommentID:b,selectedDeleteCommentID:d,setDeleteModal:l,onSubmit:M}):Object(k.jsx)(He,{comment:e,index:t,userState:a,setEditSelectedCommentID:x,selectedEditCommentID:p,setDeleteSelectedCommentID:b,selectedDeleteCommentID:d,setDeleteModal:l,onSubmit:M})})),Object(k.jsx)(de.a,{title:"Delete Confirmation",visible:i,onOk:function(){return A()},onCancel:function(){return l(!1)},centered:!0,children:Object(k.jsx)("p",{children:"Are you sure you want to delete this comment?"})})]})}function Qe(){var e,t=Object(n.useState)({}),r=Object(_.a)(t,2),c=r[0],a=r[1],o=Object(s.g)(),i=Object(O.c)((function(e){return e.user})),l=Object(s.h)(),j=Object(n.useState)(!1),u=Object(_.a)(j,2),d=u[0],b=u[1],m=Object(n.useState)(null),h=Object(_.a)(m,2),p=h[0],x=h[1],f=Object(n.useState)(null),v=Object(_.a)(f,2),g=v[0],w=v[1],y=Object(n.useState)(null),N=Object(_.a)(y,2),S=N[0],C=N[1],P=Object(n.useState)(null),E=Object(_.a)(P,2),I=E[0],D=E[1],L=Object(n.useState)(null),B=Object(_.a)(L,2),F=B[0],U=B[1];Object(n.useEffect)((function(){var e=null;Object(z.a)(T.a.mark((function t(){var r,n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.state||!l.state.hasOwnProperty("postID")){t.next=18;break}return e=l.state.postID,t.prev=2,t.next=5,te(e);case 5:r=t.sent,n=r.data,a(n),w(null),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(2),a({}),w("Error loading post data"),console.log("Error retrieving one post...",t.t0);case 16:t.next=20;break;case 18:le.b.error("An error occured while retrieving post ID"),o.push("/");case 20:case"end":return t.stop()}}),t,null,[[2,11]])})))()}),[l.state,S,F,I]);var R=function(){var e=Object(z.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce(p);case 3:b(!1),le.b.success("Post deleted successfully"),o.goBack(),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error deleting post...",null!==(t=e.t0.response)&&void 0!==t?t:e.t0),le.b.error("Error deleting post"),e.t0.response&&e.t0.response.data?le.b.error(e.t0.response.data):le.b.error("Error deleting post"),b(!1);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"view-post",children:g?Object(k.jsx)("div",{className:"loader-container",children:Object(k.jsx)(V.a,{message:g,type:"error"})}):0===Object.keys(c).length?Object(k.jsx)("div",{className:"loader-container",children:Object(k.jsx)(W.a,{size:"large"})}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"post-header",children:[Object(k.jsx)("h1",{children:c.title}),Object(k.jsxs)("div",{className:"two-cols",children:[Object(k.jsxs)("div",{children:[Object(k.jsx)(Ge.a,{size:"large",src:null!==(e=c.userImageUrl)&&void 0!==e?e:Re}),"\xa0",c.createdByName]}),Object(k.jsx)("p",{children:We()(c.createdAt).format("DD MMMM YYYY")})]})]}),Object(k.jsx)("div",{className:"centered-text",children:Object(k.jsx)(Te.a,{src:c.imagePath?c.imagePath:ie})}),Object(k.jsx)("div",{className:"post-content",children:c.content}),c.createdBy===i.user.id&&Object(k.jsxs)("div",{className:"buttons-wrapper-horizontal",children:[Object(k.jsx)(A.a,{htmlType:"button",type:"primary",icon:Object(k.jsx)(ze.a,{}),onClick:function(){return o.push("/posts/edit",{postID:c._id})},children:"Edit"}),Object(k.jsx)(A.a,{htmlType:"button",type:"primary",icon:Object(k.jsx)(Me.a,{}),danger:!0,onClick:function(){x(c._id),b(!0)},children:"Delete"})]}),Boolean(i.user.id)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(M.a,{}),Object(k.jsx)(qe,{createdBy:i.user.id,postId:c._id,setReloadingFlag:function(e){return U(e)}})]}),Object(k.jsx)(Ke,{data:c.comments,setDeleteReloadingFlag:function(e){return C(e)},setEditReloadingFlag:function(e){return D(e)}}),Object(k.jsx)(de.a,{title:"Delete Confirmation",visible:d,onOk:function(){return R()},onCancel:function(){return b(!1)},centered:!0,children:Object(k.jsx)("p",{children:"Are you sure you want to delete post?"})})]})})}var Xe=r(171),Ze=function(e){var t=e.component,r=Object(Xe.a)(e,["component"]),n=Object(O.c)((function(e){return e.user}));return Object(k.jsx)(s.b,Object(xe.a)(Object(xe.a)({},r),{},{render:function(e){return n.isLoggedIn?Object(k.jsx)(t,Object(xe.a)({},e)):Object(k.jsx)(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},$e=function(e){var t=e.component,r=Object(Xe.a)(e,["component"]),n=Object(O.c)((function(e){return e.user}));return Object(k.jsx)(s.b,Object(xe.a)(Object(xe.a)({},r),{},{render:function(e){return n.isLoggedIn?Object(k.jsx)(s.a,{to:{pathname:"/",state:{from:e.location}}}):Object(k.jsx)(t,Object(xe.a)({},e))}}))};function et(){return Object(k.jsxs)("div",{className:"my-2-auto",children:[Object(k.jsx)("h1",{className:"centered-text",children:"Page not found"}),Object(k.jsx)(U.a,{autoplay:!0,loop:!0,style:{height:"500px"},src:"https://assets1.lottiefiles.com/packages/lf20_zxliqmhr.json"})]})}var tt,rt=function(){return Object(k.jsx)(L,{children:Object(k.jsxs)(s.d,{children:[Object(k.jsx)(s.b,{exact:!0,path:["/","/home"],component:pe}),Object(k.jsx)($e,{exact:!0,path:"/login",component:ke}),Object(k.jsx)($e,{exact:!0,path:"/signup",component:Pe}),Object(k.jsx)(s.b,{exact:!0,path:"/user/posts",component:Le}),Object(k.jsx)(s.b,{exact:!0,path:"/user/profile",component:Ae}),Object(k.jsx)(s.b,{exact:!0,path:"/posts/view",component:Qe}),Object(k.jsx)(Ze,{exact:!0,path:"/posts/new",component:De}),Object(k.jsx)(Ze,{exact:!0,path:"/posts/edit",component:Be}),Object(k.jsx)(s.b,{component:et})]})})},nt=(r(491),r(50)),ct=r(78),at=r(316),st=r(318),ot=r(213),it=r.n(ot),lt=function(){try{var e=sessionStorage.getItem("user");return null===e?{isLoggedIn:!1,errors:"",token:null}:JSON.parse(e)}catch(r){var t;return void console.log("Load state error...",null!==(t=r.response)&&void 0!==t?t:r)}},jt=function(e){try{sessionStorage.clear();var t=JSON.stringify(e);sessionStorage.setItem("user",t)}catch(n){var r;console.log("Save state error...",null!==(r=n.response)&&void 0!==r?r:n)}},ut={isLoggedIn:!1,error:"",token:null,user:{id:"",userName:"",imagePath:""}};if(lt()&&lt().token){var dt=it.a.decode(lt().token);tt=Object(xe.a)(Object(xe.a)({},lt()),{},{user:{id:dt.id,userName:dt.userName,imagePath:dt.imagePath}})}else tt=Object(xe.a)({},ut);var bt=Object(ct.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:var r;if(lt()&&lt().token){var n=it.a.decode(lt().token);r=Object(xe.a)(Object(xe.a)({},lt()),{},{user:{id:n.id,userName:n.userName,imagePath:n.imagePath}})}return r;case p:var c=Object(xe.a)(Object(xe.a)({},e),{},{user:Object(xe.a)(Object(xe.a)({},e.user),{},{imagePath:t.payload.imagePath,userName:t.payload.userName})});return jt(c),c;case v:return jt(ut),ut;case f:if(t.payload){var a={token:null,isLoggedIn:!1,error:t.payload};return jt(a),a}default:return e}}}),mt=r(96),Ot=T.a.mark(pt),ht=T.a.mark(xt);function pt(e){var t,r;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,K(e.payload);case 3:if(!(t=n.sent).data.token){n.next=9;break}return r=t.data.token,jt({isLoggedIn:!0,error:"",token:r}),n.next=9,Object(mt.c)(w({token:r}));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(mt.c)(N("Login data is incorrect"));case 15:case"end":return n.stop()}}),Ot,null,[[0,11]])}function xt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(mt.d)(h,pt);case 2:case"end":return e.stop()}}),ht)}var ft=T.a.mark(vt);function vt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(mt.a)([Object(mt.b)(xt)]);case 2:case"end":return e.stop()}}),ft)}var gt=Object(st.a)({onError:function(e,t){console.log({onSagaError:"saga error",err:e,errInfo:t})}}),wt=[Object(at.createLogger)(),gt],yt=function(){var e=Object(ct.e)(bt,ct.a.apply(void 0,wt));return gt.run(vt),e,e}();a.a.render(Object(k.jsx)(O.a,{store:yt,children:Object(k.jsx)(nt.a,{children:Object(k.jsx)(rt,{})})}),document.getElementById("root"))}},[[602,1,2]]]);
//# sourceMappingURL=main.1f1a226c.chunk.js.map